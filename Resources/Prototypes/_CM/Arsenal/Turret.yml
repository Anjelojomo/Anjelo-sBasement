- type: Tag
  id: Turret

- type: entity
  parent: WeaponTurretNanoTrasen
  name: turret
  id: WeaponTurretMarine
  suffix: "Marines Gear"
  description: The engineer's best friend. It does not understand back.
  components:
  - type: Construction
    graph: MarineTurretGraph
    node: MarineTurret
  - type: Repairable
    fuelcost: 20
    doAfterDelay: 5
  - type: PointLight
    enabled: true
    radius: 3
    softness: 5
    color: "#FFFFFF"
    autoRot: true
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.45,-0.45,0.45,0.45"
        density: 60
        mask:
        - MachineMask
        layer:
        - Opaque

- type: constructionGraph
  id: MarineTurretGraph
  start: start
  graph:
    - node: start
      edges:
        - to: MarineTurret
          completed:
            - !type:SnapToGrid
              southRotation: true
          steps:
            - tag: Turret
              name: folding turret
              icon:
                sprite: Objects/Weapons/Guns/Turrets/turrets.rsi
                state: syndie_broken
              doAfter: 10
    - node: MarineTurret
      entity: WeaponTurretMarine

- type: construction
  name: "- folding turret"
  id: MarineTurretConstruction
  graph: MarineTurretGraph
  startNode: start
  targetNode: MarineTurret
  category: construction-category-structures
  description: The engineer's best friend.
  icon:
    sprite: Objects/Weapons/Guns/Turrets/turrets.rsi
    state: syndie_broken
  objectType: Structure
  placementMode: SnapgridCenter
  canRotate: false
  canBuildInImpassable: false
  conditions:
    - !type:TileNotBlocked

- type: entity
  name: turret toolbox
  suffix: Marine, Turret
  id: ToolboxElectricalTurretMarine
  description: A toolbox with turret.
  parent: ToolboxElectrical
  components:
  - type: Damageable
    damageContainer: Inorganic
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 100
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
      - trigger:
          !type:DamageTrigger
          damage: 1
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
          - !type:SpawnEntitiesBehavior
            spawn:
              WeaponTurretMarine:
                min: 1
                max: 1
